<div *ngIf="!!dataSource" class="mat-elevation-z8">
  <div class="table-responsive">
    <div *ngIf="dataSource.loading$ | async" class="spinner-container">
      <mat-spinner></mat-spinner>
    </div>
    <div class="">
      <table [dataSource]="dataSource" class="scroll-fix" mat-table
             matSort matSortDirection="asc" matSortDisableClear>

        <ng-container *ngFor="let col of columnInfoList; let i=index" matColumnDef="{{col.name}}">
          <th *matHeaderCellDef [resizeColumn]="i" mat-header-cell>
            <div class="d-inline-flex justify-content-center">
              <div mat-sort-header>
                {{col.displayText}}
                <button class="btn btn-link text-light text-sm-center btn-sort">
                  <fa-icon *ngIf="sort?.active == col.name && sort?.direction == 'asc'"
                           [icon]="['fas', 'sort-up']"
                           class="btn-sort-active"></fa-icon>
                  <fa-icon *ngIf="sort?.active == col.name && sort?.direction == 'desc'"
                           [icon]="['fas', 'sort-down']"
                           class="btn-sort-active"></fa-icon>
                  <fa-icon *ngIf="sort?.active !== col.name "
                           [icon]="['fas', 'sort']"></fa-icon>
                </button>
              </div>
            </div>
          </th>
          <td *matCellDef="let element" class="p-2" mat-cell> {{element[col.name]}} </td>
        </ng-container>

        <tr *matHeaderRowDef="propertyNames; sticky: true" mat-header-row></tr>
        <tr (click)="rowClicked(row)" *matRowDef="let row; columns: propertyNames;" mat-row></tr>
      </table>
    </div>
  </div>
  <mat-paginator [length]="50" [pageSizeOptions]="[5, 10, 20]"
                 [pageSize]="5" showFirstLastButtons></mat-paginator>
</div>
